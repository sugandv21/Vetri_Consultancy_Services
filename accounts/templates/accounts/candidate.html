{% extends "accounts/base.html" %}
{% block content %}

<h3 class="mb-4">Candidates</h3>

<div class="card shadow-sm">
  <div class="card-body p-0">

    <table class="table table-striped mb-0 align-middle">
      <thead class="table-dark">
        <tr>
          <th>Email</th>
          <th>Full Name</th>
          <th>Experience</th>
          <th>Location</th>
          <th>Skills</th>
          <th>Subscription</th>
          <th>Joined</th>
          <th>Actions</th> <!-- NEW -->
        </tr>
      </thead>

      <tbody>
        {% for user in candidates %}
        <tr>
          <td>{{ user.email }}</td>

          <td>
            {{ user.profile.full_name|default:"—" }}
          </td>

          <td>
            {% if user.profile.experience is not None %}
              {{ user.profile.experience }} yrs
            {% else %}
              —
            {% endif %}
          </td>

          <td>
            {{ user.profile.location|default:"—" }}
          </td>

          <td>
            {{ user.profile.skills|default:"—" }}
          </td>

          <td>
            <span class="badge bg-{% if user.is_pro %}success{% else %}secondary{% endif %}">
              {{ user.subscription_type }}
            </span>
          </td>

          <td>
            {{ user.date_joined|date:"d M Y" }}
          </td>

          <td>
            <a
              href="{% url 'candidate_detail' user.id %}"
              class="btn btn-sm btn-outline-primary"
            >
              View
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center py-4">
            No candidates found.
          </td>
        </tr>
        {% endfor %}
      </tbody>

    </table>

  </div>
</div>

{% endblock %}
