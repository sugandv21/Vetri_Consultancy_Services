{% extends "accounts/base.html" %}
{% block content %}

<div class="container py-4">

<h3 class="mb-4">Module Progress Dashboard</h3>

<div class="card shadow-sm">
<div class="card-body p-0">

<table class="table align-middle mb-0">
<thead class="table-light">
<tr>
<th>Student</th>
<th>Training</th>
<th>Modules</th>
<th>Progress</th>
<th>Status</th>
<th>Open</th>
</tr>
</thead>

<tbody>

{% for r in rows %}
<tr>

<td>
<strong>{{ r.enrollment.user.profile.full_name|default:r.enrollment.user.email }}</strong>
</td>

<td>{{ r.enrollment.training.title }}</td>

<td>{{ r.completed }} / {{ r.total }}</td>

<td style="width:220px">

<div class="progress" style="height:10px">
<div class="progress-bar
    {% if r.percent < 40 %} bg-danger
    {% elif r.percent < 80 %} bg-warning
    {% else %} bg-success
    {% endif %}"
    style="width: {{ r.percent }}%">
</div>
</div>

<small>{{ r.percent }}%</small>

</td>

<td>
<span class="badge
    {% if r.status == 'Completed' %} bg-success
    {% elif r.status == 'In Progress' %} bg-warning text-dark
    {% else %} bg-secondary
    {% endif %}
">
{{ r.status }}
</span>
</td>

<td>
<a href="{% url 'trainer_student_progress' r.enrollment.id %}"
   class="btn btn-sm btn-outline-primary">
View
</a>
</td>

</tr>
{% empty %}
<tr>
<td colspan="6" class="text-center py-4 text-muted">
No enrollments found
</td>
</tr>
{% endfor %}

</tbody>
</table>

</div>
</div>

</div>

{% endblock %}
