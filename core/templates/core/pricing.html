{% extends "accounts/base.html" %}
{% block content %}

<div class="container py-5">

{% if page %}

  <!-- HEADER -->
  <div class="text-center mb-5">
    <h2 class="fw-bold page-title">{{ page.title }}</h2>
    <p class="page-subtitle">{{ page.subtitle }}</p>
  </div>

  <!-- PRICING -->
  <div class="row g-4 justify-content-center">

  {% for plan in page.plans.all %}
  {% if plan.is_active %}

    <div class="col-12 col-md-6 col-lg-4">

      <div class="card pricing-card h-100 shadow-sm {% if plan.is_highlighted %}featured-plan{% endif %}">

        {% if plan.badge %}
        <div class="text-center mt-3">
          <span class="badge brand-badge">{{ plan.badge }}</span>
        </div>
        {% endif %}

        <div class="card-body text-center">

          <h5 class="card-title fw-semibold">{{ plan.name }}</h5>

          <h2 class="my-3 plan-price">
            {{ plan.price }}
          </h2>

          <p class="text-muted small">{{ plan.description }}</p>

          <ul class="list-unstyled my-4">
            {% for feature in plan.features.all %}
              <li class="{% if not feature.included %}text-muted{% endif %}">
                {% if feature.included %}✔{% else %}✖{% endif %}
                {{ feature.text }}
              </li>
            {% endfor %}
          </ul>

          {% if plan.is_current %}
            <span class="btn current-plan-btn">
              Current Plan
            </span>
          {% else %}
            <a href="{% url 'login' %}" class="btn brand-btn fw-semibold">
              {{ plan.button_text }}
            </a>
          {% endif %}

        </div>
      </div>

    </div>

  {% endif %}
  {% endfor %}

  </div>

{% endif %}

</div>

<style>

/* ===== BRAND COLORS ===== */
:root{
  --primary:#1d8094;
  --primary-dark:#063f4a;
  --primary-hover:#166978;
  --bg:#f8fafc;
}

/* HEADER */
.page-title{
  color:#111827;
  font-size:clamp(1.8rem,2.5vw,2.4rem);
}
.page-subtitle{
  color:#6b7280;
}

/* CARD */
.pricing-card{
  border-radius:18px;
  border:3px solid #e5e7eb;
  background:#fff;
  position:relative;
  overflow:hidden;
  transition:all .35s ease;
}

/* Featured (Pro) plan */
.featured-plan{
  border-color:var(--primary);
  transform:scale(1.04);
}

/* top gradient line */
.pricing-card::before{
  content:"";
  position:absolute;
  top:0;
  left:0;
  height:4px;
  width:0%;
  background:linear-gradient(90deg,var(--primary),var(--primary-dark));
  transition:.35s ease;
}

.pricing-card:hover{
  transform:translateY(-10px);
  box-shadow:0 20px 45px rgba(0,0,0,.12);
}

.pricing-card:hover::before{
  width:100%;
}

/* PRICE */
.plan-price{
  font-weight:700;
  color:var(--primary-dark);
}

/* BADGE */
.brand-badge{
  background:var(--primary);
  color:#fff;
  font-weight:600;
  padding:6px 14px;
  border-radius:30px;
}

/* FEATURES */
.pricing-card ul li{
  padding:6px 0;
  font-size:.96rem;
}
.pricing-card ul li.text-muted{
  opacity:.45;
}

/* BUTTON */
.brand-btn{
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:40px;
  padding:10px 26px;
  transition:.25s;
}
.brand-btn:hover{
  background:var(--primary-hover);
  color:#fff;
}

/* CURRENT PLAN */
.current-plan-btn{
  background:#e5e7eb;
  color:#6b7280;
  border-radius:40px;
  padding:10px 26px;
  cursor:default;
}

/* MOBILE FIX */
@media (max-width:768px){
  .featured-plan{
    transform:none;
  }
}

</style>

{% endblock %}
